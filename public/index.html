<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
  />
  <title>YouTube Playlist Audio Player</title>
  <link rel="preload" href="./player.woff2?v=2025-12-22" as="font" type="font/woff2" crossorigin>
  <link rel="icon" type="image/png" sizes="32x32" href="./img/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="./img/favicon-16x16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="./img/apple-touch-icon.png" />
  <link rel="icon" href="./img/favicon.ico" />
  <script>
    // Prevent Material icon glyph names flashing before the font loads.
    document.documentElement.classList.remove('icons-ready');
  </script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="sidebar">
    <!-- Video player -->
    <div id="player-container">
      <div id="player"></div>
      <div id="playerGestureLayer" aria-hidden="true"></div>
      <div id="trackSwipeLayer" aria-hidden="true"></div>
      <div id="seekSwipeLayer" aria-hidden="true">
        <div id="seekSwipeFeedback" aria-hidden="true">0%</div>
      </div>
    </div>

    <div id="sidebarDrawer">
      <!-- Top playlist controls -->
      <div id="playlistControls">
        <div class="pc-body">
          <form id="playlistForm">
          <!-- Saved playlist selector row -->
          <div class="pc-row">
            <div class="pc-input-wrapper playlist-history-wrapper">
              <div class="playlist-select-group">
                <button
                  id="sidebarMenuBtn"
                  type="button"
                  aria-label="Hide sidebar"
                  title="Hide sidebar"
                >
                  <span class="icon menu" aria-hidden="true">menu</span>
                </button>
                <select
                  id="playlistHistorySelect"
                  aria-label="Saved playlists"
                  disabled
                ></select>
                <button
                  id="playlistIOBtn"
                  type="button"
                  aria-label="Manage playlists"
                  title="Manage playlists"
                >
                  <span class="icon settings" aria-hidden="true">settings</span>
                </button>
              </div>
            </div>
          </div>

          <!-- Filter row -->
          <div class="pc-row">
            <div class="pc-input-wrapper">
              <div class="filter-wrapper" id="filterWrapper">
                <span class="icon search filter-icon" aria-hidden="true">search</span>
                <input
                  id="filterInput"
                  type="text"
                  aria-label="Filter tracks"
                  autocomplete="off"
                  autocorrect="off"
                  autocapitalize="off"
                  spellcheck="false"
                />
                <button type="button" id="clearFilterBtn" aria-label="Clear filter">
                  <span class="icon cancel" aria-hidden="true">cancel</span>
                </button>
              </div>
              <div class="details-toggle-wrapper" id="artistFilterWrapper">
                <button
                  id="artistFilterBtn"
                  type="button"
                  aria-label="Artist filter"
                  title="Filter by artist"
                  aria-haspopup="true"
                  aria-expanded="false"
                  aria-controls="artistFilterOverlay"
                >
                  <span class="icon artist" id="artistFilterIcon" aria-hidden="true">artist</span>
                </button>
                <div
                  id="artistFilterOverlay"
                  class="track-details-overlay"
                  role="dialog"
                  aria-modal="false"
                  aria-hidden="true"
                  aria-labelledby="artistFilterHeading"
                >
                  <div class="track-details-header" id="artistFilterHeading">Artists</div>
                  <div id="artistFilterOptions"></div>
                </div>
              </div>
              <div class="details-toggle-wrapper" id="countryFilterWrapper">
                <button
                  id="countryFilterBtn"
                  type="button"
                  aria-label="Country filter"
                  title="Filter by country"
                  aria-haspopup="true"
                  aria-expanded="false"
                  aria-controls="countryFilterOverlay"
                >
                  <span class="icon flag" id="countryFilterIcon" aria-hidden="true">flag</span>
                </button>
                <div
                  id="countryFilterOverlay"
                  class="track-details-overlay"
                  role="dialog"
                  aria-modal="false"
                  aria-hidden="true"
                  aria-labelledby="countryFilterHeading"
                >
                  <div class="track-details-header" id="countryFilterHeading">Countries</div>
                  <div id="countryFilterOptions"></div>
                </div>
              </div>
            </div>
          </div>

          </form>
        </div>
      </div>

      <!-- Playback controls -->
      <div id="trackControls">
      <div id="trackControls-top">
        <div id="trackControls-buttons">
          <div class="track-controls-group">
            <button id="prevBtn" type="button" aria-label="Previous track">
              <span class="icon prev" aria-hidden="true">skip_previous</span>
            </button>
            <button id="playPauseBtn" type="button" aria-label="Play/Pause">
              <span class="icon play" id="playPauseIcon" aria-hidden="true">play_arrow</span>
            </button>
            <button id="nextBtn" type="button" aria-label="Next track">
              <span class="icon next" aria-hidden="true">skip_next</span>
            </button>
          </div>
          <canvas id="spectrumCanvas" width="320" height="46" aria-label="Spectrum" role="img"></canvas>
          <div class="track-controls-group right">
            <button id="fullscreenBtn" type="button" aria-label="Enter fullscreen" aria-pressed="false">
              <span class="icon fullscreen" id="fullscreenIcon" aria-hidden="true">fullscreen</span>
            </button>
            <button id="shuffleBtn" type="button" aria-label="Shuffle" aria-pressed="false">
              <span class="icon shuffle" id="shuffleIcon" aria-hidden="true">shuffle</span>
            </button>
            <div class="details-toggle-wrapper" id="trackDetailsWrapper">
              <button
                id="thumbToggleBtn"
                type="button"
                aria-label="Track details"
                aria-haspopup="true"
                aria-expanded="false"
                aria-controls="trackDetailsOverlay"
              >
                <span class="icon tune" id="thumbToggleIcon" aria-hidden="true">tune</span>
              </button>
              <div
                id="trackDetailsOverlay"
                class="track-details-overlay"
                role="dialog"
                aria-modal="false"
                aria-hidden="true"
                aria-labelledby="trackDetailsHeading"
              >
                <div class="track-details-header" id="trackDetailsHeading">Details</div>
                <label class="track-details-option" for="detailTrackNumber">
                  <input type="checkbox" id="detailTrackNumber" />
                  <span>Track number</span>
                </label>
                <label class="track-details-option" for="detailThumbnail">
                  <input type="checkbox" id="detailThumbnail" />
                  <span>Thumbnail</span>
                </label>
                <label class="track-details-option" for="detailWrapLines">
                  <input type="checkbox" id="detailWrapLines" />
                  <span>Wrap lines</span>
                </label>
                <label class="track-details-option" for="detailCountry">
                  <input type="checkbox" id="detailCountry" />
                  <span>Country</span>
                </label>
                <label class="track-details-option" for="detailCheckTrack">
                  <input type="checkbox" id="detailCheckTrack" />
                  <span>Check track</span>
                </label>
                <label class="track-details-option" for="detailSortAZ">
                  <input type="checkbox" id="detailSortAZ" />
                  <span>Sort A-Z</span>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="progressWrapper">
        <input
          id="progressRange"
          type="range"
          min="0"
          max="1000"
          value="0"
        />
        <div id="timeLabel">00:00 / 00:00</div>
      </div>
      </div>

      <!-- Scrollable list -->
      <div id="trackListContainer" tabindex="0" aria-label="Playlist tracks">
        <ul id="trackList"></ul>
      </div>
    </div>
  </div>

  <div
    id="alertOverlay"
    class="alert-overlay"
    role="dialog"
    aria-modal="true"
    aria-labelledby="alertMessage"
    aria-hidden="true"
  >
    <div class="alert-dialog">
      <div class="alert-body">
        <pre id="alertMessage"></pre>
      </div>
      <button id="alertCloseBtn" type="button">
        <span class="icon close" aria-hidden="true">close</span>
        <span class="alert-close-text">OK</span>
      </button>
    </div>
  </div>

  <script src="./js/overlay-shared.js"></script>
  <script src="./js/playlist-management.js"></script>
  <script src="./js/font-load.js"></script>
  <script src="./js/country-flags.js"></script>
  <script src="./js/polaris2-player.js"></script>
  <!-- IFrame Player API (load after callback is defined) -->
  <script src="https://www.youtube.com/iframe_api"></script>
</body>
</html>
